(self.webpackChunkangular_widget=self.webpackChunkangular_widget||[]).push([[887],{2887:(w,g,l)=>{l.r(g),l.d(g,{SettingsModule:()=>T});var d=l(5508),h=l(3929),e=l(6386),p=l(4707),u=l(7579),f=l(4968),m=l(2722),v=l(3601),C=l(1884),a=l(6823),S=l(7376);class x{constructor(s,t){this.element=s,this.index=t,this._top=0}setTop(s,t){console.log(this.element.id+" top = "+this.element.getBoundingClientRect().top),this._top=t+this.element.getBoundingClientRect().top-s,console.log("elem.top = "+this._top)}}class E{constructor(s){this.activeElement=new p.t(1),this.scrollWatchedElements=s.map((t,i)=>new x(t,i))}calculate(s,t){this.scrollWatchedElements.forEach(i=>{i.setTop(s,t)}),this.scrollWatchedElements.sort((i,o)=>o._top-i._top)}onScroll(s,t){let i=null;s+1>=t?i=this.scrollWatchedElements[0]:this.scrollWatchedElements.some(o=>o._top<=s&&(i=o,!0)),this.activeElement.next(i)}}let I=(()=>{class n{constructor(t,i){this.doc=t,this.scroll=i,this.matContainer=this.doc.querySelector("mat-sidenav-content"),this.scrollWatchedElementSets=[],this.stopTrack$=new u.x,this.scrollEvents=this.scroll.scrolled(10).pipe((0,m.R)(this.stopTrack$)),this.resizeEvents=(0,f.R)(window,"resize").pipe((0,v.e)(300),(0,m.R)(this.stopTrack$))}watch(t){console.log("-------------------------------------------------------------------------"),this.scrollWatchedElementSets.length||(console.log("this.scrollWatchedElementSets.length === 0"),this.scrollEvents.subscribe(()=>this.onScroll()),this.resizeEvents.subscribe(()=>this.onResize()),this.onResize());const i=this.matContainer.scrollTop;console.log("scrollTop = "+i);const o=this.matContainer.scrollHeight;console.log("maxScrollHeight = "+o);const r=this.getTopOffset();console.log("topOffset = "+r);const c=new E(t);return c.calculate(r,i),c.onScroll(i,o),this.scrollWatchedElementSets.push(c),{active:c.activeElement.asObservable().pipe((0,C.x)()),stopWatching:()=>this.stopWatching(c)}}onScroll(){this.scrollHeight!==this.matContainer.scrollHeight&&this.onResize();const t=this.matContainer.scrollTop,i=this.matContainer.scrollHeight;this.scrollWatchedElementSets.forEach(o=>o.onScroll(t,i))}onResize(){console.log("onResize"),this.scrollHeight=this.matContainer.scrollHeight,console.log("scrollHeight = "+this.scrollHeight),this.maxScrollHeight=this.scrollHeight-this.matContainer.clientHeight;const i=this.getTopOffset(),o=this.matContainer.scrollTop;console.log("matContainer.scrollTop = "+o),this.scrollWatchedElementSets.forEach(r=>r.calculate(i,o))}getTopOffset(){const t=document.querySelector("mat-toolbar");return t&&t.clientHeight+30||0}stopWatching(t){t.activeElement.complete(),this.scrollWatchedElementSets=this.scrollWatchedElementSets.filter(i=>i!==t),this.scrollWatchedElementSets.length||this.stopTrack$.next(!0)}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275inject(a.DOCUMENT),e.\u0275\u0275inject(S.mF))},n.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var y=l(5829);const O=["settingsContainer"],W=function(n){return{"ci-settings-list-item-active":n}};function M(n,s){if(1&n&&(e.\u0275\u0275elementStart(0,"li")(1,"a",10),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&n){const t=s.$implicit,i=s.index,o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(3,W,i===o.activeIndex))("fragment",t.fragment),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.title,"")}}let P=(()=>{class n{constructor(t){this.scrollWatcherService=t,this.activeIndex=null,this.settingsList=[{title:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0423\u0422\u041c",fragment:"utm"},{title:"IP-\u0444\u0438\u043b\u044c\u0442\u0440",fragment:"ipfilter"},{title:"XML \u0441\u0445\u0435\u043c\u044b",fragment:"xsd"},{title:"\u0421\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u044b",fragment:"certificates"}],this.settingItems=[{id:"utm",header:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0423\u0422\u041c"},{id:"ipfilter",header:"\u0424\u0438\u043b\u044c\u0442\u0440 IP-\u0430\u0434\u0440\u0435\u0441\u043e\u0432"},{id:"xsd",header:"XML c\u0445\u0435\u043c\u044b"},{id:"certificates",header:"\u0421\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u044b"}]}ngOnInit(){}ngAfterViewInit(){this.settingsContainers.forEach(t=>console.log(t.nativeElement.getBoundingClientRect().top))}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(I))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["app-settings-page"]],viewQuery:function(t,i){if(1&t&&e.\u0275\u0275viewQuery(O,5,e.ElementRef),2&t){let o;e.\u0275\u0275queryRefresh(o=e.\u0275\u0275loadQuery())&&(i.settingsContainers=o)}},decls:22,vars:1,consts:[[1,"ci-settings-viewer"],[1,"ci-settings-viewer-content"],["id","utm",1,"ci-settings-content-card"],["settingsContainer",""],[1,"ci-heading"],["id","ipfilter",1,"ci-settings-content-card"],["id","xsd",1,"ci-settings-content-card"],["id","certificates",1,"ci-settings-content-card"],[1,"ci-settings-viewer-list"],[4,"ngFor","ngForOf"],["routerLink","/settings","routerLinkActiveOptions","{exact:true}",1,"ci-link",3,"ngClass","fragment"]],template:function(t,i){1&t&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2,3)(4,"h3",4),e.\u0275\u0275text(5,"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0423\u0422\u041c"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"div",5,3)(8,"h3",4),e.\u0275\u0275text(9,"\u0424\u0438\u043b\u044c\u0442\u0440 IP-\u0430\u0434\u0440\u0435\u0441\u043e\u0432"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(10,"div",6,3)(12,"h3",4),e.\u0275\u0275text(13,"XML c\u0445\u0435\u043c\u044b"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"div")(15,"div",7,3)(17,"h3",4),e.\u0275\u0275text(18,"\u0421\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u044b"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(19,"div",8)(20,"ul"),e.\u0275\u0275template(21,M,3,5,"li",9),e.\u0275\u0275elementEnd()()()()()),2&t&&(e.\u0275\u0275advance(21),e.\u0275\u0275property("ngForOf",i.settingsList))},dependencies:[a.NgClass,a.NgForOf,y.oO,h.RouterLinkWithHref],styles:[".ci-settings-viewer-content[_ngcontent-%COMP%]{font-size:15px;max-width:85%;display:flex;flex-direction:column}.ci-settings-viewer-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:5px 0 10px 16px;border-left:2px solid #0b5ca6;position:fixed;top:100px;right:0;width:12%}.ci-settings-viewer-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:none;margin:0 0 5px;padding:0;overflow:hidden}.ci-settings-viewer-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:15px;line-height:16px;margin:0;padding:5px 15px 5px 0}.ci-settings-viewer-list[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{opacity:.6;color:#0b5ca6;font-weight:400;transition:opacity .3s ease-in-out}.ci-settings-viewer-list[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .ci-settings-viewer-list[_ngcontent-%COMP%]   a.ci-settings-list-item-active[_ngcontent-%COMP%]{opacity:1}.ci-settings-content-card[_ngcontent-%COMP%]{margin-bottom:35px;background:#fff;border:1px solid #e0e4e7;padding:12px;height:400px}"]}),n})(),T=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=e.\u0275\u0275defineInjector({imports:[d.m,h.RouterModule.forChild([{path:"",component:P}])]}),n})()}}]);