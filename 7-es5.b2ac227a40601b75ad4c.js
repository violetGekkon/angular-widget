!function(){function t(t,i){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,i){if(!t)return;if("string"==typeof t)return e(t,i);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return e(t,i)}(t))||i&&t&&"number"==typeof t.length){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,o=!0,s=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return o=t.done,t},e:function(t){s=!0,c=t},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw c}}}}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function n(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"Ig+x":function(e,r,a){"use strict";a.r(r),a.d(r,"routes",function(){return Rt}),a.d(r,"MarketParticipantsModule",function(){return Lt});var c,o=a("tyNb"),s=a("LRne"),l=a("PqYM"),u=[{fsrarId:"030000334465",fullName:"\u041e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u044f 1",inn:"7799060060",kpp:"7799060101",firmType:"\u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c"},{fsrarId:"030000333524",fullName:"\u041e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u044f 2",inn:"7799060060",kpp:"7799060101",firmType:"\u0438\u043c\u043f\u043e\u0440\u0442\u0435\u0440 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c"},{fsrarId:"030000338867",fullName:"\u041e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u044f 3",inn:"7799060060",kpp:"7799060101",firmType:"\u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c \u0440\u043e\u0437\u043d\u0438\u0446\u0430"},{fsrarId:"030000330907",fullName:"\u041e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u044f 4",inn:"7799060060",kpp:"7799060101",firmType:"\u043e\u043f\u0442\u043e\u0432\u0438\u043a"}],f=[{fsrarId:"030000334465",fullName:"Organization 1",inn:"7799060060",kpp:"7799060101",firmType:"\u0438\u043c\u043f\u043e\u0440\u0442\u0435\u0440 \u043e\u043f\u0442\u043e\u0432\u0438\u043a"},{fsrarId:"030000333524",fullName:"Organization 2",inn:"7799060060",kpp:"7799060101",firmType:"\u043e\u043f\u0442\u043e\u0432\u0438\u043a \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c"},{fsrarId:"030000338867",fullName:"Organization 3",inn:"7799060060",kpp:"7799060101",firmType:"\u043e\u043f\u0442\u043e\u0432\u0438\u043a \u043f\u0435\u0440\u0435\u0432\u043e\u0437\u0447\u0438\u043a"},{fsrarId:"030000330907",fullName:"Organization 4",inn:"7799060060",kpp:"7799060101",firmType:"\u043e\u0431\u0449\u0435\u043f\u0438\u0442"}],b=[{id:0,title:"\u041f\u0425\u041f",count:"0"},{id:1,title:"\u0420\u041f\u0410",count:"0"},{id:2,title:"\u0420\u041f\u041e",count:"0"},{id:3,title:"\u0417\u0425\u041f",count:"0"}],p=a("vkgz"),m=a("eIep"),h=a("fXoL"),d=a("tk/3"),g=((c=function(){function t(e){i(this,t),this.http=e}return n(t,[{key:"getAllMarketParticipants",value:function(){return Object(s.a)(u)}},{key:"getCounterparties",value:function(){return Object(s.a)(f)}},{key:"getLicenseGroup",value:function(){var t=0;return Object(l.a)(5e3,1e4).pipe(Object(p.a)(function(e){return t+=1}),Object(m.a)(function(e){return Object(s.a)(b.map(function(e){return Object.assign(Object.assign({},e),{count:(+e.count+t).toString()})}))}))}},{key:"getPage",value:function(t){return this.http.post("/api/v1/RetailCompanies/SearchCompany",t)}}]),t}()).\u0275fac=function(t){return new(t||c)(h.Yb(d.a))},c.\u0275prov=h.Kb({token:c,factory:c.\u0275fac}),c),v=new Map([["\u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c","maker"],["\u0438\u043c\u043f\u043e\u0440\u0442\u0435\u0440 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c","maker-importer"],["\u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c \u0440\u043e\u0437\u043d\u0438\u0446\u0430","maker-retailer"],["\u0438\u043c\u043f\u043e\u0440\u0442\u0435\u0440 \u043e\u043f\u0442\u043e\u0432\u0438\u043a \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c","maker-importer-wholesaler"],["\u043e\u043f\u0442\u043e\u0432\u0438\u043a","wholesaler"],["\u0438\u043c\u043f\u043e\u0440\u0442\u0435\u0440 \u043e\u043f\u0442\u043e\u0432\u0438\u043a","wholesaler-importer"],["\u043e\u043f\u0442\u043e\u0432\u0438\u043a \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c","maker-wholesaler"],["\u043e\u043f\u0442\u043e\u0432\u0438\u043a \u043f\u0435\u0440\u0435\u0432\u043e\u0437\u0447\u0438\u043a","wholesaler-carrier"],["\u043e\u0431\u0449\u0435\u043f\u0438\u0442","catering"],["\u043e\u0431\u0449\u0435\u043f\u0438\u0442 \u0440\u043e\u0437\u043d\u0438\u0446\u0430","catering-retailer"],["\u043f\u0435\u0440\u0435\u0432\u043e\u0437\u0447\u0438\u043a","carrier"]]),y=a("XNiG"),T=a("XiUz"),k=a("ofXK"),S=function(t){return{active:t}};function w(t,e){if(1&t){var i=h.Vb();h.Ub(0,"div",2),h.cc("click",function(){h.tc(i);var t=e.$implicit;return h.gc().select(t)}),h.Ub(1,"span"),h.Bc(2),h.Tb(),h.Ub(3,"span"),h.Bc(4),h.Tb(),h.Tb()}if(2&t){var r=e.$implicit;h.lc("ngClass",h.oc(3,S,r.active)),h.Cb(2),h.Cc(r.title),h.Cb(2),h.Cc(r.count)}}var U,C,I,A=((U=function(){function t(){i(this,t),this.filters=[],this.changeFilter=new y.a}return n(t,[{key:"ngOnInit",value:function(){}},{key:"select",value:function(t){t.active=!t.active,this.changeFilter.next(this.filters)}}]),t}()).\u0275fac=function(t){return new(t||U)},U.\u0275cmp=h.Ib({type:U,selectors:[["app-filters"]],inputs:{group:"group",filters:"filters"},decls:2,vars:1,consts:[["fxLayout","row","fxLayoutGap","26px"],["fxLayout","column","class","filter",3,"ngClass","click",4,"ngFor","ngForOf"],["fxLayout","column",1,"filter",3,"ngClass","click"]],template:function(t,e){1&t&&(h.Ub(0,"div",0),h.Ac(1,w,5,5,"div",1),h.Tb()),2&t&&(h.Cb(1),h.lc("ngForOf",e.filters))},directives:[T.c,T.d,k.k,k.j],styles:[".filter[_ngcontent-%COMP%]:hover{cursor:pointer}.filter.active[_ngcontent-%COMP%]{color:red}"]}),U),D=a("1G5W"),O=((C=function(){function t(){i(this,t),this.storage=new P}return n(t,[{key:"forKey",value:function(t){return new B(t,this.storage)}},{key:"get",value:function(t){return this.storage.get(t)}},{key:"remove",value:function(t){this.storage.remove(t)}},{key:"set",value:function(t,e){this.storage.set(t,e)}}]),t}()).\u0275fac=function(t){return new(t||C)},C.\u0275prov=h.Kb({token:C,factory:C.\u0275fac}),C),B=function(){function t(e,r){i(this,t),this.key=e,this.storage=r}return n(t,[{key:"get",value:function(){return this.storage.get(this.key)}},{key:"remove",value:function(){console.log("TemporaryStorageFacet remove"),this.storage.remove(this.key)}},{key:"set",value:function(t){this.storage.set(this.key,t)}}]),t}(),P=function(){function t(){i(this,t),this.cache=Object.create(null),this.storageKey="temp_session_storage",this.loadFromCache()}return n(t,[{key:"get",value:function(t){var e;return null!==(e=this.cache[t])&&void 0!==e?e:null}},{key:"set",value:function(t,e){this.cache[t]=e,this.persistToCache()}},{key:"remove",value:function(t){t in this.cache&&(delete this.cache[t],this.persistToCache())}},{key:"loadFromCache",value:function(){try{var t=sessionStorage.getItem(this.storageKey);t&&Object.assign(this.cache,JSON.parse(t))}catch(e){console.warn("SessionStorageWrapper was unable to read from SessionStorage API."),console.error(e)}}},{key:"persistToCache",value:function(){try{sessionStorage.setItem(this.storageKey,JSON.stringify(this.cache))}catch(t){console.warn("SessionStorageWrapper was unable to write to SessionStorage API."),console.error(t)}}}]),t}(),x=((I=function(){function t(e,r){i(this,t),this.temporaryStorageService=e,this.httService=r,this.storageTime=1e4,this._stop=new y.a,this.marketParticipantsTempStorage=e.forKey("market_participants")}return n(t,[{key:"startTimer",value:function(){var t=this;console.log("start timer"),Object(l.a)(this.storageTime).pipe(Object(D.a)(this._stop)).subscribe(function(e){return t.clearTmpStorage()})}},{key:"stopTimer",value:function(){console.log("stop timer"),this._stop.next()}},{key:"saveFiltersAndGetFilteredList",value:function(t){return this.saveStateInStorage(t),this.httService.getPage(t)}},{key:"getStateFromStorage",value:function(){return this.marketParticipantsTempStorage.get()}},{key:"saveStateInStorage",value:function(t){this.marketParticipantsTempStorage.set(t)}},{key:"saveOrgUrlToStorage",value:function(t){var e=this.getStateFromStorage();this.saveStateInStorage(Object.assign(Object.assign({},e),{organizationUrl:t}))}},{key:"getOrgUrlFromStorage",value:function(){var t=this.getStateFromStorage();return t&&t.organizationUrl}},{key:"clearTmpStorage",value:function(){this.marketParticipantsTempStorage.remove()}}]),t}()).\u0275fac=function(t){return new(t||I)(h.Yb(O),h.Yb(g))},I.\u0275prov=h.Kb({token:I,factory:I.\u0275fac}),I),F=a("lJxs"),j=a("pLZG"),N=a("wd/R"),R=a.n(N),L=a("+0xr");function Y(t,e){1&t&&(h.Ub(0,"th",11),h.Bc(1," ID "),h.Tb())}function M(t,e){if(1&t&&(h.Ub(0,"td",12),h.Bc(1),h.Tb()),2&t){var i=e.$implicit;h.Cb(1),h.Dc(" ",i.fsrarId," ")}}function $(t,e){1&t&&(h.Ub(0,"th",11),h.Bc(1," TYPE "),h.Tb())}function _(t,e){if(1&t&&(h.Ub(0,"td",12),h.Bc(1),h.Tb()),2&t){var i=e.$implicit;h.Cb(1),h.Dc(" ",i.firmType," ")}}function z(t,e){1&t&&(h.Ub(0,"th",11),h.Bc(1," FULL_NAME "),h.Tb())}function K(t,e){if(1&t&&(h.Ub(0,"td",12),h.Bc(1),h.Tb()),2&t){var i=e.$implicit;h.Cb(1),h.Dc(" ",i.fullName," ")}}function G(t,e){1&t&&(h.Ub(0,"th",11),h.Bc(1," INN "),h.Tb())}function J(t,e){if(1&t&&(h.Ub(0,"td",12),h.Bc(1),h.Tb()),2&t){var i=e.$implicit;h.Cb(1),h.Dc(" ",i.inn," ")}}function E(t,e){1&t&&(h.Ub(0,"th",11),h.Bc(1," KPP "),h.Tb())}function H(t,e){if(1&t&&(h.Ub(0,"td",12),h.Bc(1),h.Tb()),2&t){var i=e.$implicit;h.Cb(1),h.Dc(" ",i.kpp," ")}}function V(t,e){1&t&&h.Pb(0,"tr",13)}function W(t,e){if(1&t){var i=h.Vb();h.Ub(0,"tr",14),h.cc("click",function(){h.tc(i);var t=e.$implicit;return h.gc().goToDetail(t)}),h.Tb()}}var X,q=((X=function(){function e(t,r,n,a){i(this,e),this.service=t,this.facade=r,this.route=n,this.router=a,this.displayedColumns=["fsrarId","firmType","fullName","inn","kpp"],this.dataSource=[],this.links=["\u0441\u043f\u0440\u0430\u0432\u043e\u0447\u043d\u0438\u043a \u0451\u043c\u043a\u043e\u0441\u0442\u0438","\u0441\u043f\u0440\u0430\u0432\u043e\u0447\u043d\u0438\u043a \u0441\u044b\u0440\u044c\u044f"],this.licFilters=[0,1,2,3].map(function(t){return{id:t,active:!1}})}return n(e,[{key:"ngOnInit",value:function(){var e=this,i=R.a.unix(1632147685).format("DD.MM.YYYY hh:mm");console.log(i);var r=R()("22.09.2021 21:00","DD MMM YYYY hh:mm").unix();R.a.unix(r),console.log(r),this.facade.getStateFromStorage()&&(this.filters=this.facade.getStateFromStorage()),this.service.getAllMarketParticipants().subscribe(function(t){return e.dataSource=t}),this.service.getLicenseGroup().subscribe(function(i){var r,n;if(e.filters&&(null===(n=null===(r=e.filters)||void 0===r?void 0:r.companyParams)||void 0===n?void 0:n.licenses_groups)){var a=e.filters.companyParams.licenses_groups.split(",").map(function(t){return{title:t}});e.licFilters=i.map(function(e){var i,r=e,n=t(a);try{for(n.s();!(i=n.n()).done;){var c=i.value;e.title===c.title&&(r.active=!0)}}catch(o){n.e(o)}finally{n.f()}return r})}else e.licFilters=i})}},{key:"ngAfterViewInit",value:function(){var t=this;this.licGroupsFilters.changeFilter.pipe(Object(F.a)(function(t){return t.filter(function(t){return t.active})}),Object(j.a)(function(t){return!!t})).subscribe(function(e){console.log(e),t.filters=Object.assign(Object.assign({},t.filters),{companyParams:{licenses_groups:e.map(function(t){return t.title}).toString()}}),t.facade.saveFiltersAndGetFilteredList(t.filters)})}},{key:"goToDetail",value:function(t){this.router.navigate([v.get(t.firmType)],{relativeTo:this.route})}}]),e}()).\u0275fac=function(t){return new(t||X)(h.Ob(g),h.Ob(x),h.Ob(o.a),h.Ob(o.e))},X.\u0275cmp=h.Ib({type:X,selectors:[["app-market-participants"]],viewQuery:function(t,e){var i;1&t&&h.Fc(A,1),2&t&&h.qc(i=h.dc())&&(e.licGroupsFilters=i.first)},decls:20,vars:8,consts:[["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","fsrarId"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","firmType"],["matColumnDef","fullName"],["matColumnDef","inn"],["matColumnDef","kpp"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],["group","type",3,"filters"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row","",3,"click"]],template:function(t,e){1&t&&(h.Ub(0,"table",0),h.Sb(1,1),h.Ac(2,Y,2,0,"th",2),h.Ac(3,M,2,1,"td",3),h.Rb(),h.Sb(4,4),h.Ac(5,$,2,0,"th",2),h.Ac(6,_,2,1,"td",3),h.Rb(),h.Sb(7,5),h.Ac(8,z,2,0,"th",2),h.Ac(9,K,2,1,"td",3),h.Rb(),h.Sb(10,6),h.Ac(11,G,2,0,"th",2),h.Ac(12,J,2,1,"td",3),h.Rb(),h.Sb(13,7),h.Ac(14,E,2,0,"th",2),h.Ac(15,H,2,1,"td",3),h.Rb(),h.Ac(16,V,1,0,"tr",8),h.Ac(17,W,1,0,"tr",9),h.Tb(),h.Ub(18,"div"),h.Pb(19,"app-filters",10),h.Tb()),2&t&&(h.xc("width","100%"),h.lc("dataSource",e.dataSource),h.Cb(16),h.lc("matHeaderRowDef",e.displayedColumns),h.Cb(1),h.lc("matRowDefColumns",e.displayedColumns),h.Cb(1),h.xc("margin-top","100","px"),h.Cb(1),h.lc("filters",e.licFilters))},directives:[L.j,L.c,L.e,L.b,L.g,L.i,A,L.d,L.a,L.f,L.h],styles:[""]}),X),Q=a("vvyD"),Z=a("bTqV"),tt=a("Wp6s");function et(t,e){1&t&&(h.Ub(0,"mat-card",2),h.Ub(1,"mat-card-header"),h.Pb(2,"div",3),h.Ub(3,"mat-card-title"),h.Bc(4,"\u041f\u0420\u041e\u0418\u0417\u0412\u041e\u0414\u0421\u0422\u0412\u041e"),h.Tb(),h.Tb(),h.Ub(5,"mat-card-content"),h.Ub(6,"p"),h.Bc(7," The Shiba Inu is the smallest of the six original and distinct spitz breeds of dog from Japan. A small, agile dog that copes very well with mountainous terrain, the Shiba Inu was originally bred for hunting. "),h.Tb(),h.Tb(),h.Tb())}function it(t,e){1&t&&(h.Ub(0,"mat-card",2),h.Ub(1,"mat-card-header"),h.Pb(2,"div",3),h.Ub(3,"mat-card-title"),h.Bc(4,"\u0418\u041c\u041f\u041e\u0420\u0422\u0415\u0420 \u041e\u041f\u0422\u041e\u0412\u0418\u041a"),h.Tb(),h.Ub(5,"mat-card-subtitle"),h.Bc(6,"Dog Breed"),h.Tb(),h.Tb(),h.Ub(7,"mat-card-content"),h.Ub(8,"p"),h.Bc(9," The Shiba Inu is the smallest of the six original and distinct spitz breeds of dog from Japan. A small, agile dog that copes very well with mountainous terrain, the Shiba Inu was originally bred for hunting. "),h.Tb(),h.Tb(),h.Tb())}function rt(t,e){1&t&&(h.Ub(0,"mat-card",2),h.Ub(1,"mat-card-header"),h.Pb(2,"div",3),h.Ub(3,"mat-card-title"),h.Bc(4,"\u0418\u041c\u041f\u041e\u0420\u0422"),h.Tb(),h.Ub(5,"mat-card-subtitle"),h.Bc(6,"Dog Breed"),h.Tb(),h.Tb(),h.Ub(7,"mat-card-content"),h.Ub(8,"p"),h.Bc(9," The Shiba Inu is the smallest of the six original and distinct spitz breeds of dog from Japan. A small, agile dog that copes very well with mountainous terrain, the Shiba Inu was originally bred for hunting. "),h.Tb(),h.Tb(),h.Tb())}function nt(t,e){1&t&&(h.Ub(0,"mat-card",2),h.Ub(1,"mat-card-header"),h.Pb(2,"div",3),h.Ub(3,"mat-card-title"),h.Bc(4,"\u041f\u0415\u0420\u0415\u0412\u041e\u0417\u0427\u0418\u041a"),h.Tb(),h.Ub(5,"mat-card-subtitle"),h.Bc(6,"Dog Breed"),h.Tb(),h.Tb(),h.Ub(7,"mat-card-content"),h.Ub(8,"p"),h.Bc(9," The Shiba Inu is the smallest of the six original and distinct spitz breeds of dog from Japan. A small, agile dog that copes very well with mountainous terrain, the Shiba Inu was originally bred for hunting. "),h.Tb(),h.Tb(),h.Tb())}var at,ct=((at=function(){function t(){i(this,t)}return n(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||at)},at.\u0275cmp=h.Ib({type:at,selectors:[["app-statistic"]],inputs:{type:"type"},decls:15,vars:4,consts:[["fxLayout","row","fxLayoutGap","20px"],["class","example-card",4,"ngIf"],[1,"example-card"],["mat-card-avatar","",1,"example-header-image"]],template:function(t,e){1&t&&(h.Ub(0,"section",0),h.Ac(1,et,8,0,"mat-card",1),h.Ac(2,it,10,0,"mat-card",1),h.Ac(3,rt,10,0,"mat-card",1),h.Ac(4,nt,10,0,"mat-card",1),h.Ub(5,"mat-card",2),h.Ub(6,"mat-card-header"),h.Pb(7,"div",3),h.Ub(8,"mat-card-title"),h.Bc(9,"\u041e\u0421\u0422\u0410\u0422\u041a\u0418"),h.Tb(),h.Ub(10,"mat-card-subtitle"),h.Bc(11,"Dog Breed"),h.Tb(),h.Tb(),h.Ub(12,"mat-card-content"),h.Ub(13,"p"),h.Bc(14," The Shiba Inu is the smallest of the six original and distinct spitz breeds of dog from Japan. A small, agile dog that copes very well with mountainous terrain, the Shiba Inu was originally bred for hunting. "),h.Tb(),h.Tb(),h.Tb(),h.Tb()),2&t&&(h.Cb(1),h.lc("ngIf","maker"===e.type||"maker-wholesaler"===e.type),h.Cb(1),h.lc("ngIf","wholesaler-importer"===e.type),h.Cb(1),h.lc("ngIf","wholesaler-importer"===e.type),h.Cb(1),h.lc("ngIf","wholesaler-carrier"===e.type))},directives:[T.c,T.d,k.l,tt.a,tt.e,tt.c,tt.i,tt.h,tt.d],styles:[""]}),at);function ot(t,e){1&t&&(h.Ub(0,"th",10),h.Bc(1," ID "),h.Tb())}function st(t,e){if(1&t&&(h.Ub(0,"td",11),h.Bc(1),h.Tb()),2&t){var i=e.$implicit;h.Cb(1),h.Dc(" ",i.fsrarId," ")}}function lt(t,e){1&t&&(h.Ub(0,"th",10),h.Bc(1," TYPE "),h.Tb())}function ut(t,e){if(1&t&&(h.Ub(0,"td",11),h.Bc(1),h.Tb()),2&t){var i=e.$implicit;h.Cb(1),h.Dc(" ",i.firmType," ")}}function ft(t,e){1&t&&(h.Ub(0,"th",10),h.Bc(1," FULL_NAME "),h.Tb())}function bt(t,e){if(1&t&&(h.Ub(0,"td",11),h.Bc(1),h.Tb()),2&t){var i=e.$implicit;h.Cb(1),h.Dc(" ",i.fullName," ")}}function pt(t,e){1&t&&(h.Ub(0,"th",10),h.Bc(1," INN "),h.Tb())}function mt(t,e){if(1&t&&(h.Ub(0,"td",11),h.Bc(1),h.Tb()),2&t){var i=e.$implicit;h.Cb(1),h.Dc(" ",i.inn," ")}}function ht(t,e){1&t&&(h.Ub(0,"th",10),h.Bc(1," KPP "),h.Tb())}function dt(t,e){if(1&t&&(h.Ub(0,"td",11),h.Bc(1),h.Tb()),2&t){var i=e.$implicit;h.Cb(1),h.Dc(" ",i.kpp," ")}}function gt(t,e){1&t&&h.Pb(0,"tr",12)}function vt(t,e){if(1&t){var i=h.Vb();h.Ub(0,"tr",13),h.cc("click",function(){h.tc(i);var t=e.$implicit;return h.gc().goToDetail(t)}),h.Tb()}}var yt,Tt=((yt=function(){function t(e,r,n){i(this,t),this.service=e,this.route=r,this.router=n,this.type=v.values().next().value,this.displayedColumns=["fsrarId","firmType","fullName","inn","kpp"],this.dataSource=[]}return n(t,[{key:"ngOnInit",value:function(){var t=this;this.service.getCounterparties().subscribe(function(e){return t.dataSource=e})}},{key:"goToDetail",value:function(t){console.log(this.route),this.router.navigate([v.get(t.firmType)],{relativeTo:this.route.parent})}}]),t}()).\u0275fac=function(t){return new(t||yt)(h.Ob(g),h.Ob(o.a),h.Ob(o.e))},yt.\u0275cmp=h.Ib({type:yt,selectors:[["app-table"]],inputs:{type:"type"},decls:18,vars:5,consts:[["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","fsrarId"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","firmType"],["matColumnDef","fullName"],["matColumnDef","inn"],["matColumnDef","kpp"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row","",3,"click"]],template:function(t,e){1&t&&(h.Ub(0,"table",0),h.Sb(1,1),h.Ac(2,ot,2,0,"th",2),h.Ac(3,st,2,1,"td",3),h.Rb(),h.Sb(4,4),h.Ac(5,lt,2,0,"th",2),h.Ac(6,ut,2,1,"td",3),h.Rb(),h.Sb(7,5),h.Ac(8,ft,2,0,"th",2),h.Ac(9,bt,2,1,"td",3),h.Rb(),h.Sb(10,6),h.Ac(11,pt,2,0,"th",2),h.Ac(12,mt,2,1,"td",3),h.Rb(),h.Sb(13,7),h.Ac(14,ht,2,0,"th",2),h.Ac(15,dt,2,1,"td",3),h.Rb(),h.Ac(16,gt,1,0,"tr",8),h.Ac(17,vt,1,0,"tr",9),h.Tb()),2&t&&(h.xc("width","100%"),h.lc("dataSource",e.dataSource),h.Cb(16),h.lc("matHeaderRowDef",e.displayedColumns),h.Cb(1),h.lc("matRowDefColumns",e.displayedColumns))},directives:[L.j,L.c,L.e,L.b,L.g,L.i,L.d,L.a,L.f,L.h],styles:[""]}),yt),kt=function(){return["../"]};function St(t,e){if(1&t&&(h.Sb(0),h.Ub(1,"p"),h.Bc(2),h.hc(3,"uppercase"),h.Tb(),h.Ub(4,"button",1),h.Bc(5,"\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043a \u0441\u043f\u0438\u0441\u043a\u0443"),h.Tb(),h.Ub(6,"div",2),h.Pb(7,"app-statistic",3),h.Pb(8,"app-table",3),h.Tb(),h.Rb()),2&t){var i=e.ngIf;h.Cb(2),h.Dc("market-participant-detail for ",h.ic(3,4,i)," works!"),h.Cb(2),h.lc("routerLink",h.nc(6,kt)),h.Cb(3),h.lc("type",i),h.Cb(1),h.lc("type",i)}}var wt,Ut,Ct,It,At,Dt,Ot=((wt=function(){function t(e){i(this,t),this.route=e,this.type$=e.paramMap.pipe(Object(p.a)(function(t){return console.log(t.get("marketParticipantUrl"))}),Object(F.a)(function(t){return t.get("marketParticipantUrl")}))}return n(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||wt)(h.Ob(o.a))},wt.\u0275cmp=h.Ib({type:wt,selectors:[["app-market-participant-detail"]],decls:2,vars:3,consts:[[4,"ngIf"],["mat-raised-button","",3,"routerLink"],["fxLayout","row","fxLayoutGap","20px"],[3,"type"]],template:function(t,e){1&t&&(h.Ac(0,St,9,7,"ng-container",0),h.hc(1,"async")),2&t&&h.lc("ngIf",h.ic(1,1,e.type$))},directives:[k.l,Z.a,o.f,T.c,T.d,ct,Tt],pipes:[k.b,k.t],styles:[""]}),wt),Bt=a("3Pt+"),Pt=a("+NYR"),xt=((At=function(){function t(e,r,n){i(this,t),this._router=e,this.navigationService=r,this.facade=n}return n(t,[{key:"canActivate",value:function(t,e){if(this.previousUrl=0!==this.navigationService.history.length?this.navigationService.history.slice(-1)[0]:null,this.previousUrl&&!this.previousUrl.includes("market-participants")){console.log("another route");var i=this.facade.getOrgUrlFromStorage();if(i)return this._router.navigate([i]).then(function(t){console.log(t)}).catch(function(t){return console.log("Navigation fails",t)}),!1}return!0}}]),t}()).\u0275fac=function(t){return new(t||At)(h.Yb(o.e),h.Yb(Pt.a),h.Yb(x))},At.\u0275prov=h.Kb({token:At,factory:At.\u0275fac}),At),Ft=((It=function(){function t(e){i(this,t),this.facade=e}return n(t,[{key:"canDeactivate",value:function(t,e,i,r){return r&&!r.url.includes("market-participants")&&(this.facade.saveOrgUrlToStorage(i.url),this.facade.startTimer()),!0}}]),t}()).\u0275fac=function(t){return new(t||It)(h.Yb(x))},It.\u0275prov=h.Kb({token:It,factory:It.\u0275fac}),It),jt=((Ct=function(){function t(e){i(this,t),this.facade=e}return n(t,[{key:"canDeactivate",value:function(t,e,i,r){return console.log("ListGuardService"),console.log(r.url),r&&!r.url.includes("market-participants")&&this.facade.clearTmpStorage(),!0}}]),t}()).\u0275fac=function(t){return new(t||Ct)(h.Yb(x))},Ct.\u0275prov=h.Kb({token:Ct,factory:Ct.\u0275fac}),Ct),Nt=((Ut=function(){function t(e,r,n){i(this,t),this._router=e,this.navigationService=r,this.facade=n}return n(t,[{key:"canActivate",value:function(t,e){return console.log("CanActivateParticipantItemGuardService"),console.log("state",e),console.log("ActivatedRouteSnapshot",t),this.previousUrl=0!==this.navigationService.history.length?this.navigationService.history.slice(-1)[0]:null,console.log("this.previousUrl",this.previousUrl),this.previousUrl&&!this.previousUrl.includes("market-participants")&&(console.log("another route"),this.facade.stopTimer()),!0}}]),t}()).\u0275fac=function(t){return new(t||Ut)(h.Yb(o.e),h.Yb(Pt.a),h.Yb(x))},Ut.\u0275prov=h.Kb({token:Ut,factory:Ut.\u0275fac}),Ut),Rt=[{path:"",component:q,canActivate:[xt],canDeactivate:[jt]},{path:":marketParticipantUrl",component:Ot,canActivate:[Nt],canDeactivate:[Ft]}],Lt=((Dt=function t(){i(this,t)}).\u0275mod=h.Mb({type:Dt}),Dt.\u0275inj=h.Lb({factory:function(t){return new(t||Dt)},providers:[g,x,O,xt,Nt,Ft,jt],imports:[[k.c,o.i.forChild(Rt),Q.a,T.e,Bt.s],o.i]}),Dt)}}])}();